import axios from 'axios'
import { Button, TextField } from '@mui/material';
import {Grid} from '@mui/material';
import React, { useState } from 'react';
import UserTable from '../components/Table';
import ErrorAlert from '../components/ErrorAlert';

function Employee() {
    const [name, setName] = useState("");
    const [user, setUser] = useState([]);
    const [error, setError] = useState(null);

    const selectUserOne = e => {
        e.preventDefault();
        axios.post('/sql/user',{
          "name": name
        }).then(res => {
          setError("")
          setUser(res.data.user)
        })
        .catch(function (error){
          setError(error.response.data.message)
        })
      }


    const setNamehandler = (event) => {
      setName(event.target.value)
    }
    return (
    <>
        <ErrorAlert error={error}/>
        <h2>社員検索</h2>
        <Grid item xs={12}>
          <form onSubmit={selectUserOne}>
            <Grid container spacing={2} alignItems="center" justify="center">
                <Grid item xs={8}>
                    <TextField
                        label="名前"
                        variant="outlined"
                        fullWidth
                        value={name} 
                        onChange={setNamehandler}
                    />
                </Grid>
                <Grid item xs={4}>
                    <Button variant="contained" color="primary" type="submit" fullWidth>
                        検索
                    </Button>
                </Grid>
            </Grid>
          </form>

            <UserTable 
            user = {user}
            />
        </Grid>
    </>
  )}


export default Employee;
// "1' or '1' = '1';--",