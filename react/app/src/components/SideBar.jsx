import React, {useContext, useEffect, useState} from 'react';
import { AppBar, Toolbar, Drawer, List, ListItem, Typography, Link, ListItemButton } from '@mui/material';
import AuthContext from '../middleware/AuthContext';
function SideBar() {
  const drawerWidth = 240;
  const {token} = useContext(AuthContext)
  const [items, setItems] = useState([
    {name: "Home", url: "/"},
    {name: "ログイン", url: "/login"},
    {name: "社員検索", url: "/employee"},
    {name: "ファイル検索", url: "/file"},
    {name: "画像検索", url: "/image"}
  ]);

  useEffect(() => {
    if(token) {
      setItems([
        {name: "Home", url: "/"},
        {name: "ログイン", url: "/login"},
        {name: "社員検索", url: "/employee"},
        {name: "ファイル検索", url: "/file"},
        {name: "画像検索", url: "/image"},
        {name: "顧客情報", url: "/internal/client"},
        {name: "ファイル編集", url: "/internal/file"}
      ]);
    } else {
      setItems([
        {name: "Home", url: "/"},
        {name: "ログイン", url: "/login"},
        {name: "社員検索", url: "/employee"},
        {name: "ファイル検索", url: "/file"},
        {name: "画像検索", url: "/image"}
      ]);
    }
  }, [token]);
  return (
    <div>
      <AppBar position="fixed" sx={{ width: `calc(100% - ${drawerWidth}px)`, ml: `${drawerWidth}px` }}>
        <Toolbar>
          <Typography variant="h6">
            社内ポータル
          </Typography>
        </Toolbar>
      </AppBar>
      <Drawer anchor="left" variant="permanent"
      sx={{
        width: drawerWidth,
        flexShrink: 0,
        [`& .MuiDrawer-paper`]: { width: drawerWidth, boxSizing: 'border-box' },
      }}
>
        <Toolbar /> {/* AppBarの高さ分のスペースを確保 */}
        <List>
          {items.map((item) => (
            <ListItem key={item.name}>
                <ListItemButton 
                    sx={{ textAlign: 'center' }}
                    component={Link}
                    to={item.url}
                >
                    {item.name}
                </ListItemButton>
            </ListItem>
          ))}
        </List>
      </Drawer>
    </div>
  );
}

export default SideBar;